<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
  </head>
  <body>
    <%- include('./partials/navbar.ejs') %>
<div class="wrapper">
    <div class="middle">
      <div class="description">
        <h2>Top Rated Movies</h2>
      </div>
    <table>
      <div class="content">
      <% if (Movies && Movies.length) { %>
        <% Movies.forEach(function(movie) { %>
          <% if (movie) { %>
            <tr>
              <td>
                <div class="card flex-row"><img class="card-img-left example-card-img-responsive" src="<%= movie.Poster %>" alt="Movie Poster" height="200px"/>
                  <div class="card-body">
                    <!-- TODO make sure movie.Year is broguht up -->
                    <h2 class="card-title h5 h4-sm"><%= movie.Title %> <%=movie.Year%></h2>
                    <p class="card-text">Genres:
                      <% movie.Genres.forEach(function(genre, index) { %>
                        <%= genre.Name %><% if (index !== movie.Genres.length - 1) { %>,<% } %>
                      <% }); %></p>
                  </div>
                </div>
              </td>
            </tr>
            
          <% } else { %>
            <tr>
              <td>
                <h2>Movie Title Not Available</h2>
              </td>
            </tr>
          <% } %>
        <% }); %>
      <% } else { %>
        <tr>
          <td>
            <h2>No movies available</h2>
          </td>
        </tr>
      <% } %>
    </div>
    </table>
  </div>
</div>
  </body>
  </html>